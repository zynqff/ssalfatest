<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poetry AI | –õ–µ–Ω—Ç–∞</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root { --accent: #00d4ff; --secondary: #9d50bb; --glass: rgba(255, 255, 255, 0.03); }
        body { background: #0d1117; color: white; font-family: 'Segoe UI', sans-serif; }
        
        /* –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ */
        .poem-card {
            background: var(--glass);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 22px;
            padding: 20px;
            transition: 0.3s;
            text-align: center;
        }
        .poem-card:hover { transform: translateY(-5px); border-color: var(--accent); }
        
        .poem-title { color: var(--accent); font-weight: 700; margin-bottom: 5px; font-size: 1.2rem; }
        .poem-author { font-size: 0.85rem; opacity: 0.6; margin-bottom: 15px; }
        .lines-count { font-size: 0.75rem; background: rgba(255,255,255,0.05); padding: 3px 10px; border-radius: 10px; }

        .btn-read {
            background: linear-gradient(135deg, var(--accent), var(--secondary));
            border: none; color: white; width: 100%; border-radius: 12px;
            padding: 10px; font-weight: 700; margin-top: 15px;
        }

        /* –°—Ç–∏–ª—å –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ (–°—Ç–µ–∫–ª–æ) */
        .modal-content {
            background: rgba(20, 25, 35, 0.9) !important;
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255,255,255,0.1) !important;
            border-radius: 30px !important;
            color: white;
        }
        .modal-header { border-bottom: 1px solid rgba(255,255,255,0.05); }
        .full-poem-text { white-space: pre-wrap; font-size: 1.1rem; line-height: 1.6; margin: 20px 0; }
        
        .modal-actions { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .btn-modal { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: white; border-radius: 12px; padding: 10px; transition: 0.3s; }
        .btn-modal:hover { background: var(--accent); color: #000; }
        .btn-ai-main { grid-column: span 2; background: linear-gradient(135deg, var(--accent), var(--secondary)); border: none; font-weight: 700; }
    </style>
</head>
<body>

<div class="container py-5">
    <h2 class="mb-5 fw-bold">–í–∞—à–∞ –ª–µ–Ω—Ç–∞</h2>
    <div class="row g-4">
        {% for poem in poems %}
        <div class="col-6 col-md-4 col-lg-3">
            <div class="poem-card">
                <div class="poem-title">{{ poem.title }}</div>
                <div class="poem-author">{{ poem.author }}</div>
                <span class="lines-count">üìè –°—Ç—Ä–æ–∫: {{ (poem.content.split('\n')|length) }}</span>
                
                <button class="btn-read" 
                        onclick="openPoem('{{ poem.title }}', '{{ poem.author }}', `{{ poem.content }}`, '{{ poem.id }}')">
                    –ß–∏—Ç–∞—Ç—å
                </button>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<div class="modal fade" id="poemModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content p-3">
            <div class="modal-header d-flex justify-content-between align-items-center">
                <h5 class="modal-title" id="mTitle" style="color: var(--accent)"></h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p id="mAuthor" class="text-secondary small"></p>
                <div id="mText" class="full-poem-text"></div>
                
                <div class="modal-actions mt-4">
                    <button class="btn-modal">üìå –ó–∞–∫—Ä–µ–ø–∏—Ç—å</button>
                    <button class="btn-modal">‚úîÔ∏è –ü—Ä–æ—á–∏—Ç–∞–Ω–æ</button>
                    <a id="mAiLink" href="#" class="btn btn-modal btn-ai-main">üß† –ò–ò –ê–Ω–∞–ª–∏–∑ (Groq)</a>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    function openPoem(title, author, content, id) {
        document.getElementById('mTitle').innerText = title;
        document.getElementById('mAuthor').innerText = '–ê–≤—Ç–æ—Ä: ' + author;
        document.getElementById('mText').innerText = content;
        document.getElementById('mAiLink').href = '/poem/' + id;
        
        var myModal = new bootstrap.Modal(document.getElementById('poemModal'));
        myModal.show();
    }
</script>

</body>
</html>

